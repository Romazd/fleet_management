<%= form_with(model: [@vehicle, maintenance_service]) do |form| %>
  <% if maintenance_service.errors.any? %>
    <div class="alert alert-danger">
      <h4><%= maintenance_service.errors.count %> <%= maintenance_service.errors.count == 1 ? 'error impidió' : 'errores impidieron' %> que este servicio sea guardado:</h4>
      <ul>
        <% maintenance_service.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <%= form.label :date, "Fecha" %>
    <%= form.date_field :date, class: 'form-control', required: true,
        max: Date.current %>
  </div>

  <div class="form-group">
    <%= form.label :description, "Descripción" %>
    <%= form.text_area :description, class: 'form-control', required: true,
        rows: 3, placeholder: "Describa el servicio de mantenimiento..." %>
  </div>

  <div class="form-group">
    <%= form.label :status, "Estado" %>
    <%= form.select :status,
        options_for_select([['Pendiente', 'pending'], ['En Progreso', 'in_progress'], ['Completado', 'completed']], maintenance_service.status),
        {}, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.label :priority, "Prioridad" %>
    <%= form.select :priority,
        options_for_select([['Baja', 'low'], ['Media', 'medium'], ['Alta', 'high']], maintenance_service.priority),
        {}, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.label :cost_cents, "Costo (en centavos)" %>
    <%= form.number_field :cost_cents, class: 'form-control', required: true,
        min: 0, placeholder: "ej., 5000 para $50.00" %>
    <small class="form-text text-muted">Ingrese el costo en centavos (ej., 5000 = $50.00)</small>
  </div>

  <% if maintenance_service.persisted? && maintenance_service.completed? %>
    <div class="form-group">
      <%= form.label :completed_at, "Completado el" %>
      <%= form.datetime_local_field :completed_at, class: 'form-control' %>
    </div>
  <% end %>

  <div class="form-actions">
    <%= form.submit maintenance_service.new_record? ? t('maintenance_services.form.save') : t('maintenance_services.form.update'), class: 'btn btn-primary' %>
    <%= link_to t('maintenance_services.form.cancel'), vehicle_path(@vehicle), class: 'btn' %>
  </div>
<% end %>